# ğŸ“Š Diagrama do Banco de Dados Otimizado

## ğŸ” Modelo Entidade-Relacionamento (ER)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CATEGORIAS   â”‚      â”‚     PRODUTOS     â”‚      â”‚    CLIENTES     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚      â”‚ id (PK)          â”‚      â”‚ id (PK)         â”‚
â”‚ categoria       â”‚â—„â”€â”€â”€â”€â”â”‚ nome             â”‚      â”‚ nome            â”‚
â”‚ descricao       â”‚     â””â”‚ categoria_id (FK)â”‚      â”‚ email           â”‚
â”‚ ativo           â”‚      â”‚ preco            â”‚      â”‚ telefone        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ estoque          â”‚      â”‚ segmento        â”‚
                         â”‚ ativo            â”‚      â”‚ criado_em       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ ultima_compra   â”‚
                                 â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                         â”‚
                                 â”‚                         â”‚
                                 â–¼                         â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                         â”‚   ITENS_VENDA    â”‚             â”‚
                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
                         â”‚ id (PK)          â”‚             â”‚
                         â”‚ venda_id (FK)    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ produto_id (FK)  â”‚             â”‚
                         â”‚ quantidade       â”‚             â”‚
                         â”‚ valor_unitario   â”‚             â”‚
                         â”‚ subtotal         â”‚             â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                                 â–²                        â”‚
                                 â”‚                        â”‚
                                 â”‚                        â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚      VENDAS      â”‚      â”‚  PARTIÃ‡Ã•ES DE   â”‚
                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚     VENDAS      â”‚
                         â”‚ id (PK)          â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                         â”‚ data_venda       â”‚      â”‚ vendas_2023_q1  â”‚
                         â”‚ cliente_id (FK)  â”‚      â”‚ vendas_2023_q2  â”‚
                         â”‚ valor_total      â”‚      â”‚ vendas_2023_q3  â”‚
                         â”‚ status           â”‚      â”‚ vendas_2023_q4  â”‚
                         â”‚ criado_em        â”‚      â”‚ vendas_future   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ OrganizaÃ§Ã£o FÃ­sica do Banco

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BANCO DE DADOS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TABELAS    â”‚    ÃNDICES   â”‚   TRIGGERS   â”‚  PROCEDURES    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ categorias  â”‚ PRIMARY KEY  â”‚ After Insert â”‚ sp_relatorio   â”‚
â”‚ clientes    â”‚ FOREIGN KEY  â”‚ After Update â”‚ sp_busca       â”‚
â”‚ produtos    â”‚ idx_cliente  â”‚ After Delete â”‚ sp_atualiza    â”‚
â”‚ vendas      â”‚ idx_data     â”‚              â”‚ sp_dashboard   â”‚
â”‚ itens_venda â”‚ idx_produto  â”‚              â”‚ sp_manutencao  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de Dados e OtimizaÃ§Ãµes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ENTRADA      â”‚     â”‚  PROCESSAMENTO  â”‚     â”‚     SAÃDA       â”‚
â”‚    DE DADOS     â”‚â”€â”€â”€â”€â–¶â”‚   OTIMIZADO     â”‚â”€â”€â”€â”€â–¶â”‚  RÃPIDA E       â”‚
â”‚                 â”‚     â”‚                 â”‚     â”‚  EFICIENTE      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â–²                       â–²
        â”‚                       â”‚                       â”‚
        â–¼                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VALIDAÃ‡ÃƒO E    â”‚     â”‚   ÃNDICES E     â”‚     â”‚   CONSULTAS     â”‚
â”‚  NORMALIZAÃ‡ÃƒO   â”‚â”€â”€â”€â”€â–¶â”‚  PARTICIONAMENTOâ”‚â”€â”€â”€â”€â–¶â”‚   OTIMIZADAS    â”‚
â”‚                 â”‚     â”‚                 â”‚     â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Arquitetura de Performance

```
NÃVEL DE PERFORMANCE
â”‚
â”œâ”€â”€â”€ 1. Modelagem Otimizada
â”‚    â”œâ”€â”€â”€ NormalizaÃ§Ã£o EstratÃ©gica
â”‚    â”œâ”€â”€â”€ Campos Calculados
â”‚    â””â”€â”€â”€ Relacionamentos Eficientes
â”‚
â”œâ”€â”€â”€ 2. EstratÃ©gia de Ãndices
â”‚    â”œâ”€â”€â”€ Ãndices PrimÃ¡rios
â”‚    â”œâ”€â”€â”€ Ãndices SecundÃ¡rios
â”‚    â””â”€â”€â”€ Ãndices Compostos
â”‚
â”œâ”€â”€â”€ 3. Particionamento
â”‚    â”œâ”€â”€â”€ PartiÃ§Ãµes por Data
â”‚    â””â”€â”€â”€ DistribuiÃ§Ã£o de Carga
â”‚
â”œâ”€â”€â”€ 4. OtimizaÃ§Ã£o de Consultas
â”‚    â”œâ”€â”€â”€ CTEs
â”‚    â”œâ”€â”€â”€ JOINs Otimizados
â”‚    â””â”€â”€â”€ Evitar Subqueries
â”‚
â””â”€â”€â”€ 5. ManutenÃ§Ã£o ContÃ­nua
     â”œâ”€â”€â”€ AnÃ¡lise de Performance
     â”œâ”€â”€â”€ ReconstruÃ§Ã£o de Ãndices
     â””â”€â”€â”€ Monitoramento de Uso
```

## ğŸ“Š Tabela Comparativa de Performance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     OPERAÃ‡ÃƒO      â”‚   ANTES    â”‚   DEPOIS   â”‚   MELHORIA  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RelatÃ³rio Vendas  â”‚   4.7s     â”‚    0.8s    â”‚     83%     â”‚
â”‚ Busca Produtos    â”‚   3.2s     â”‚    0.3s    â”‚     91%     â”‚
â”‚ AnÃ¡lise PerÃ­odo   â”‚   3.5s     â”‚    0.6s    â”‚     83%     â”‚
â”‚ Perfil Cliente    â”‚   5.2s     â”‚    0.7s    â”‚     87%     â”‚
â”‚ AnÃ¡lise Estoque   â”‚   4.1s     â”‚    0.5s    â”‚     88%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
``` 